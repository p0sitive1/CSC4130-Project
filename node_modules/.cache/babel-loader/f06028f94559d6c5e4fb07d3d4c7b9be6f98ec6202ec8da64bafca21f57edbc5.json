{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Ander Shi\\\\Desktop\\\\Assignment 4\\\\Assignment 4\\\\src\\\\components\\\\BarChart.js\",\n  _this = this,\n  _s = $RefreshSig$();\nimport React from 'react';\nimport * as d3 from 'd3';\nimport { filter, select, svg } from 'd3';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BarChart = _ref => {\n  _s();\n  let {\n    config: {\n      colorScale,\n      containerWidth,\n      containerHeight,\n      margin\n    },\n    data,\n    setFilterCategory,\n    filterCategory\n  } = _ref;\n  return function (filterCategory) {\n    const svgRef = React.useRef();\n    const chart = React.useRef();\n    const xAxisG = React.useRef();\n    const yAxisG = React.useRef();\n    const bars = React.useRef();\n\n    // These calculated intermidiate data should be\n    // cleaned up to React-styled code.\n    // that is, to combine all below refs and the \"initialized\" state into a single state\n    const _colorScale = React.useRef();\n    const width = React.useRef();\n    const height = React.useRef();\n    const xScale = React.useRef();\n    const yScale = React.useRef();\n    const xAxis = React.useRef();\n    const yAxis = React.useRef();\n    const _containerWidth = React.useRef();\n    const _containerHeight = React.useRef();\n    const [initialized, setInitialized] = React.useState(false);\n\n    // Cannot dynamically change. If dynamically chaning is needed, these code can be modified.\n\n    const _margin = React.useRef();\n    const orderedKeys = ['Easy', 'Intermediate', 'Difficult'];\n\n    // Intialize the bar plot (5pts)\n\n    // To DO\n    var selections = ['Easy', 'Intermediate', 'Difficult'];\n    React.useEffect(() => {\n      initVis();\n    }, []);\n\n    // Update rendering result (5pts)\n\n    // To DO\n\n    React.useEffect(() => {\n      if (initialized) {\n        updateVis();\n      }\n    }, [data]);\n    var filterCategory = React.useMemo(() => {\n      return selections;\n    }, [selections]);\n    const initVis = () => {\n      let svg = d3.select(svgRef.current);\n      _containerWidth.current = containerWidth || 260;\n      _containerHeight.current = containerHeight || 300;\n      svg.attr('width', _containerWidth.current).attr('height', _containerHeight.current);\n      _margin.current = margin || {\n        top: 25,\n        right: 20,\n        bottom: 20,\n        left: 40\n      };\n      width.current = _containerWidth.current - _margin.current.left - _margin.current.right;\n      height.current = _containerHeight.current - _margin.current.top - _margin.current.bottom;\n      xScale.current = d3.scaleBand().range([0, width.current]).paddingInner(0.2);\n      yScale.current = d3.scaleLinear().range([height.current, 0]);\n      xAxis.current = d3.axisBottom(xScale.current).ticks(['Easy', 'Intermediate', 'Difficult']).tickSizeOuter(0);\n      yAxis.current = d3.axisLeft(yScale.current).ticks(6).tickSizeOuter(0);\n      chart.current = svg.append('g').attr('transform', `translate(${_margin.current.left},${_margin.current.top})`);\n      xAxisG.current = chart.current.append('g').attr('class', 'axis x-axis').attr('transform', `translate(0,${height.current})`);\n      yAxisG.current = chart.current.append('g').attr('class', 'axis y-axis');\n      svg.append('text').attr('class', 'axis-title').attr('x', 0).attr('y', 0).attr('dy', '.71em').text('Trails');\n      _colorScale.current = d3.scaleOrdinal().range(['#a0a1e2', '#6495ed', '#04ea17']) // light green to dark green\n      .domain(['Easy', 'Intermediate', 'Difficult']);\n      setInitialized(true);\n    };\n    const updateVis = () => {\n      const aggregatedDataMap = d3.rollups(data, v => v.length, d => d.difficulty);\n      let aggregatedData = Array.from(aggregatedDataMap, _ref2 => {\n        let [key, count] = _ref2;\n        return {\n          key,\n          count\n        };\n      });\n      aggregatedData = aggregatedData.sort((a, b) => {\n        return orderedKeys.indexOf(a.key) - orderedKeys.indexOf(b.key);\n      });\n      let colorValue = d => d.key;\n      let xValue = d => d.key;\n      let yValue = d => d.count;\n      xScale.current.domain(aggregatedData.map(xValue));\n      yScale.current.domain([0, d3.max(aggregatedData, yValue)]);\n\n      // renderVis()\n      bars.current = chart.current.selectAll('.bar').data(aggregatedData, xValue).join('rect').attr('class', 'bar').attr('x', d => xScale.current(xValue(d))).attr('width', xScale.current.bandwidth()).attr('height', d => height.current - yScale.current(yValue(d))).attr('y', d => yScale.current(yValue(d))).attr('fill', d => _colorScale.current(colorValue(d))).on('click', function (event, d) {\n        // Check if current category is active and toggle class (5pts)\n\n        // To DO\n\n        // Get the names of all active/filtered categories (10pts)\n\n        // To DO\n\n        if (selections.includes(d.key)) {\n          var index = selections.indexOf(d.key);\n          selections.splice(index, 1);\n        } else {\n          selections.push(d.key);\n        }\n        setFilterCategory(filterCategory);\n\n        // Change parent node's React State with the selected category names (5pts)\n\n        // To DO\n        if (selections.includes(d.key)) {\n          this.selected = true;\n        } else {\n          this.selected = false;\n        }\n        if (this.selected) {\n          select(this).attr(\"stroke\", \"black\").attr(\"stroke-width\", 2);\n        } else {\n          select(this).attr(\"stroke-width\", 0);\n        }\n      })\n      // hover event\n      .on('mouseover', d => {\n        select(d.currentTarget).attr(\"stroke\", \"grey\").attr(\"stroke-width\", 3);\n      }).on('mouseout', d => {\n        if (d.fromElement.selected) {\n          select(d.currentTarget).attr(\"stroke\", \"black\").attr(\"stroke-width\", 2);\n        } else {\n          select(d.currentTarget).attr(\"stroke-width\", 0);\n        }\n      });\n      xAxisG.current.call(xAxis.current);\n      yAxisG.current.call(yAxis.current);\n    };\n    return /*#__PURE__*/_jsxDEV(\"svg\", {\n      ref: svgRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 9\n    }, _this);\n  }(filterCategory);\n};\n_s(BarChart, \"h3HT3LIXA18JUYIHU3SHQv7z/Ao=\");\n_c = BarChart;\nexport default BarChart;\nvar _c;\n$RefreshReg$(_c, \"BarChart\");","map":{"version":3,"names":["React","d3","filter","select","svg","BarChart","config","colorScale","containerWidth","containerHeight","margin","data","setFilterCategory","filterCategory","svgRef","useRef","chart","xAxisG","yAxisG","bars","_colorScale","width","height","xScale","yScale","xAxis","yAxis","_containerWidth","_containerHeight","initialized","setInitialized","useState","_margin","orderedKeys","selections","useEffect","initVis","updateVis","useMemo","current","attr","top","right","bottom","left","scaleBand","range","paddingInner","scaleLinear","axisBottom","ticks","tickSizeOuter","axisLeft","append","text","scaleOrdinal","domain","aggregatedDataMap","rollups","v","length","d","difficulty","aggregatedData","Array","from","key","count","sort","a","b","indexOf","colorValue","xValue","yValue","map","max","selectAll","join","bandwidth","on","event","includes","index","splice","push","selected","currentTarget","fromElement","call"],"sources":["C:/Users/Ander Shi/Desktop/Assignment 4/Assignment 4/src/components/BarChart.js"],"sourcesContent":["import React from 'react';\r\nimport * as d3 from 'd3';\r\nimport { filter, select, svg } from 'd3';\r\n\r\nconst BarChart = ({\r\n    config:{\r\n        colorScale,\r\n        containerWidth,\r\n        containerHeight,\r\n        margin\r\n    },\r\n    data,\r\n    setFilterCategory,\r\n    filterCategory\r\n}) => {\r\n\r\n    const svgRef = React.useRef();\r\n\r\n    const chart = React.useRef();\r\n    const xAxisG = React.useRef();\r\n    const yAxisG = React.useRef();\r\n    const bars = React.useRef();\r\n\r\n    // These calculated intermidiate data should be\r\n    // cleaned up to React-styled code.\r\n    // that is, to combine all below refs and the \"initialized\" state into a single state\r\n    const _colorScale = React.useRef();\r\n    const width = React.useRef();\r\n    const height = React.useRef();\r\n    const xScale = React.useRef();\r\n    const yScale = React.useRef();\r\n    const xAxis = React.useRef();\r\n    const yAxis = React.useRef();\r\n    const _containerWidth = React.useRef();\r\n    const _containerHeight = React.useRef();\r\n    const [ initialized, setInitialized ] = React.useState(false)\r\n\r\n    // Cannot dynamically change. If dynamically chaning is needed, these code can be modified.\r\n    \r\n    const _margin = React.useRef();\r\n\r\n    const orderedKeys = ['Easy', 'Intermediate', 'Difficult'];\r\n\r\n    // Intialize the bar plot (5pts)\r\n\r\n    // To DO\r\n    var selections = ['Easy', 'Intermediate', 'Difficult']\r\n\r\n    React.useEffect(() =>{\r\n        initVis();\r\n    }, [])\r\n\r\n    // Update rendering result (5pts)\r\n\r\n    // To DO\r\n\r\n    React.useEffect(() => {\r\n        if (initialized) {\r\n            updateVis();\r\n        }        \r\n    }, [data])\r\n\r\n    var filterCategory = React.useMemo(() => {\r\n        return selections;\r\n    }, [selections])\r\n    \r\n    const initVis = () => {\r\n        let svg = d3.select(svgRef.current);\r\n        _containerWidth.current = containerWidth || 260;\r\n        _containerHeight.current =  containerHeight || 300;\r\n        svg.attr('width', _containerWidth.current).attr('height', _containerHeight.current);\r\n        _margin.current = margin || {top: 25, right: 20, bottom: 20, left: 40};\r\n        width.current = _containerWidth.current - _margin.current.left - _margin.current.right;\r\n        height.current = _containerHeight.current - _margin.current.top - _margin.current.bottom;\r\n        xScale.current = d3.scaleBand().range([0, width.current]).paddingInner(0.2);\r\n        yScale.current = d3.scaleLinear().range([height.current, 0]);\r\n        xAxis.current = d3.axisBottom(xScale.current).ticks(['Easy', 'Intermediate', 'Difficult']).tickSizeOuter(0);\r\n        yAxis.current = d3.axisLeft(yScale.current).ticks(6).tickSizeOuter(0);\r\n        chart.current = svg.append('g').attr('transform', `translate(${_margin.current.left},${_margin.current.top})`);\r\n        xAxisG.current = chart.current.append('g').attr('class', 'axis x-axis').attr('transform', `translate(0,${height.current})`);\r\n        yAxisG.current = chart.current.append('g').attr('class', 'axis y-axis');\r\n        svg.append('text').attr('class', 'axis-title').attr('x', 0).attr('y', 0).attr('dy', '.71em').text('Trails');\r\n\r\n        _colorScale.current = d3.scaleOrdinal()\r\n            .range(['#a0a1e2', '#6495ed', '#04ea17']) // light green to dark green\r\n            .domain(['Easy','Intermediate','Difficult']);\r\n\r\n        setInitialized(true);\r\n    }\r\n\r\n    const updateVis = () => {\r\n        const aggregatedDataMap = d3.rollups(data, v => v.length, d => d.difficulty);\r\n        let aggregatedData = Array.from(aggregatedDataMap, ([key, count]) => ({ key, count }));\r\n        aggregatedData = aggregatedData.sort((a,b) => {\r\n            return orderedKeys.indexOf(a.key) - orderedKeys.indexOf(b.key);\r\n        });\r\n        let colorValue = d => d.key;\r\n        let xValue = d => d.key;\r\n        let yValue = d => d.count;\r\n\r\n        xScale.current.domain(aggregatedData.map(xValue))\r\n        yScale.current.domain([0, d3.max(aggregatedData, yValue)]);\r\n\r\n\r\n        // renderVis()\r\n        bars.current = chart.current.selectAll('.bar')\r\n        .data(aggregatedData, xValue)\r\n        .join('rect')\r\n        .attr('class', 'bar')\r\n        .attr('x', d => xScale.current(xValue(d)))\r\n        .attr('width', xScale.current.bandwidth())\r\n        .attr('height', d => height.current - yScale.current(yValue(d)))\r\n        .attr('y', d => yScale.current(yValue(d)))\r\n        .attr('fill', d => _colorScale.current(colorValue(d)))\r\n        .on('click', function(event, d) {\r\n            // Check if current category is active and toggle class (5pts)\r\n\r\n            // To DO\r\n\r\n            // Get the names of all active/filtered categories (10pts)\r\n\r\n            // To DO\r\n\r\n            if (selections.includes(d.key)){\r\n                var index = selections.indexOf(d.key)\r\n                selections.splice(index, 1)\r\n            }\r\n            else {\r\n                selections.push(d.key)\r\n            }\r\n            \r\n            setFilterCategory(filterCategory\r\n                )\r\n\r\n            // Change parent node's React State with the selected category names (5pts)\r\n\r\n            // To DO\r\n            if (selections.includes(d.key)){\r\n                this.selected = true\r\n            }\r\n            else {\r\n                this.selected = false\r\n            }\r\n\r\n            if (this.selected){\r\n                select(this).attr(\"stroke\", \"black\").attr(\"stroke-width\", 2)\r\n            }\r\n            else {\r\n                select(this).attr(\"stroke-width\", 0)\r\n            }\r\n            \r\n        })\r\n        // hover event\r\n        .on('mouseover', (d) => {\r\n            select(d.currentTarget).attr(\"stroke\", \"grey\").attr(\"stroke-width\", 3)\r\n        })\r\n        .on('mouseout', (d) => {\r\n            if (d.fromElement.selected){\r\n                select(d.currentTarget).attr(\"stroke\", \"black\").attr(\"stroke-width\", 2)\r\n            }\r\n            else {\r\n                select(d.currentTarget).attr(\"stroke-width\", 0)\r\n            }\r\n        });\r\n\r\n        xAxisG.current.call(xAxis.current);\r\n        yAxisG.current.call(yAxis.current);\r\n    }\r\n\r\n    return (\r\n        <svg ref={svgRef}></svg>\r\n    );\r\n}\r\n\r\nexport default BarChart;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}